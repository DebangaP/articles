<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Applying FFT to Stock Price Prediction</title>
<script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
    --bg: #0a0e17;
    --bg2: #111827;
    --bg3: #1a2332;
    --bg4: #1f2937;
    --border: #2d3748;
    --text: #f1f5f9;
    --text2: #94a3b8;
    --text3: #64748b;
    --accent: #6366f1;
    --accent2: #818cf8;
    --green: #10b981;
    --green2: #34d399;
    --red: #ef4444;
    --amber: #f59e0b;
    --cyan: #06b6d4;
    --purple: #a78bfa;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Inter', system-ui, sans-serif;
    line-height: 1.7;
    -webkit-font-smoothing: antialiased;
}

/* --- Article Container --- */
.article {
    max-width: 820px;
    margin: 0 auto;
    padding: 60px 40px 100px;
}

/* --- Hero Section --- */
.hero {
    text-align: center;
    margin-bottom: 64px;
    padding-bottom: 48px;
    border-bottom: 1px solid var(--border);
}

.hero-badge {
    display: inline-block;
    background: rgba(99, 102, 241, 0.15);
    color: var(--accent2);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    padding: 6px 16px;
    border-radius: 20px;
    border: 1px solid rgba(99, 102, 241, 0.3);
    margin-bottom: 24px;
}

.hero h1 {
    font-size: 42px;
    font-weight: 800;
    line-height: 1.15;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #f1f5f9 0%, #94a3b8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.hero .subtitle {
    font-size: 18px;
    color: var(--text2);
    font-weight: 400;
    max-width: 600px;
    margin: 0 auto 28px;
    line-height: 1.6;
}

.hero-meta {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    font-size: 13px;
    color: var(--text3);
}

.hero-meta span {
    display: flex;
    align-items: center;
    gap: 6px;
}

/* --- Section Headers --- */
h2 {
    font-size: 28px;
    font-weight: 700;
    margin: 56px 0 20px;
    color: var(--text);
    display: flex;
    align-items: center;
    gap: 12px;
}

h2 .section-num {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: rgba(99, 102, 241, 0.15);
    color: var(--accent2);
    border-radius: 10px;
    font-size: 16px;
    font-weight: 700;
    flex-shrink: 0;
}

h3 {
    font-size: 20px;
    font-weight: 600;
    margin: 36px 0 14px;
    color: var(--text);
}

p {
    color: var(--text2);
    font-size: 16px;
    margin-bottom: 18px;
}

strong { color: var(--text); font-weight: 600; }

/* --- Key Insight Boxes --- */
.insight-box {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-left: 4px solid var(--accent);
    border-radius: 8px;
    padding: 20px 24px;
    margin: 24px 0;
}

.insight-box.green { border-left-color: var(--green); }
.insight-box.amber { border-left-color: var(--amber); }
.insight-box.red { border-left-color: var(--red); }

.insight-box .label {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1.2px;
    text-transform: uppercase;
    color: var(--accent2);
    margin-bottom: 8px;
}

.insight-box.green .label { color: var(--green2); }
.insight-box.amber .label { color: var(--amber); }

.insight-box p { margin-bottom: 0; font-size: 15px; }

/* --- Equation Blocks --- */
.equation {
    background: var(--bg3);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 24px 28px;
    margin: 24px 0;
    font-family: 'JetBrains Mono', monospace;
    font-size: 15px;
    color: var(--green2);
    text-align: center;
    line-height: 2;
    overflow-x: auto;
}

.equation .comment {
    color: var(--text3);
    font-size: 12px;
    font-style: italic;
}

/* --- Chart Container --- */
.chart-section {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin: 32px 0;
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.chart-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
}

.chart-subtitle {
    font-size: 13px;
    color: var(--text3);
}

.chart-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid rgba(45, 55, 72, 0.5);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: var(--text2);
}

.legend-line {
    width: 20px;
    height: 2px;
    border-radius: 1px;
}

.legend-line.dashed {
    background: repeating-linear-gradient(90deg, currentColor 0, currentColor 4px, transparent 4px, transparent 8px);
    height: 2px;
}

/* --- Phase Wheel Diagram --- */
.phase-diagram {
    display: flex;
    justify-content: center;
    margin: 32px 0;
}

.phase-wheel {
    position: relative;
    width: 340px;
    height: 340px;
}

.phase-wheel svg {
    width: 100%;
    height: 100%;
}

/* --- Confidence Breakdown --- */
.confidence-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin: 24px 0;
}

.conf-card {
    background: var(--bg3);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 18px 20px;
}

.conf-card .weight {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 6px;
}

.conf-card .name {
    font-size: 15px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 4px;
}

.conf-card .desc {
    font-size: 13px;
    color: var(--text3);
    line-height: 1.5;
}

/* --- Results Table --- */
.results-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 24px 0;
    font-size: 14px;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid var(--border);
}

.results-table thead th {
    background: var(--bg3);
    color: var(--text2);
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid var(--border);
}

.results-table tbody td {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(45, 55, 72, 0.4);
    color: var(--text2);
}

.results-table tbody tr:last-child td {
    border-bottom: none;
}

.results-table tbody tr:hover {
    background: rgba(99, 102, 241, 0.05);
}

.badge {
    display: inline-block;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.badge-green { background: rgba(16, 185, 129, 0.15); color: var(--green2); }
.badge-red { background: rgba(239, 68, 68, 0.15); color: #f87171; }
.badge-amber { background: rgba(245, 158, 11, 0.15); color: var(--amber); }
.badge-purple { background: rgba(167, 139, 250, 0.15); color: var(--purple); }
.badge-cyan { background: rgba(6, 182, 212, 0.15); color: var(--cyan); }

.mono {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
}

/* --- Stats Row --- */
.stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin: 24px 0;
}

.stat-card {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 18px 20px;
    text-align: center;
}

.stat-card .stat-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 4px;
}

.stat-card .stat-label {
    font-size: 12px;
    color: var(--text3);
    text-transform: uppercase;
    letter-spacing: 0.8px;
}

/* --- Callout --- */
.callout {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(6, 182, 212, 0.08));
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: 12px;
    padding: 28px 32px;
    margin: 32px 0;
    text-align: center;
}

.callout h3 {
    margin-top: 0;
    color: var(--accent2);
}

.callout p {
    margin-bottom: 0;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

/* --- Code Block --- */
code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    background: var(--bg3);
    padding: 2px 8px;
    border-radius: 4px;
    color: var(--cyan);
}

/* --- Divider --- */
.divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 48px 0;
}

/* --- Image Hint for Screenshots --- */
.screenshot-hint {
    position: absolute;
    top: 8px;
    right: 12px;
    font-size: 10px;
    color: var(--text3);
    opacity: 0;
    pointer-events: none;
}

/* --- Print / Screenshot Mode --- */
@media print {
    body { background: #0d1117; }
    .article { padding: 20px; }
}

/* --- Responsive --- */
@media (max-width: 700px) {
    .article { padding: 32px 20px; }
    .hero h1 { font-size: 28px; }
    .stats-row { grid-template-columns: 1fr 1fr; }
    .confidence-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<article class="article">

    <!-- ============ HERO ============ -->
    <header class="hero">
        <div class="hero-badge">Technical Deep Dive</div>
        <h1>Applying Fast Fourier Transform to Stock Price Prediction</h1>
        <p class="subtitle">
            How I built a spectral analysis system that decomposes stock prices into
            hidden cycles — and uses them to project future peaks and troughs.
        </p>
        <div class="hero-meta">
            <span>Debanga Phukan</span>
            <span>&middot;</span>
            <span>February 2026</span>
        </div>
    </header>

    <!-- ============ SECTION 1: THE PROBLEM ============ -->
    <h2><span class="section-num">1</span> The Problem</h2>

    <p>
        Most stock prediction systems focus on <strong>what direction</strong> price will move.
        But there's a question they often miss: <strong>when</strong> will the next turning point arrive?
    </p>
    <p>
        Institutional rotation, options expiry cycles, quarterly rebalancing, sector-level
        inflows — these forces create <strong>repeating rhythmic patterns</strong> in price data.
        The patterns are invisible to the naked eye because they're buried under trend and noise.
        But they're mathematically detectable.
    </p>

    <div class="insight-box">
        <div class="label">Core Insight</div>
        <p>
            If you can identify the dominant cycles in a stock's price history and determine
            where you currently sit within those cycles, you can project when the next
            peak and trough will arrive — turning timing from guesswork into math.
        </p>
    </div>

    <!-- ============ SECTION 2: THE THEORY ============ -->
    <h2><span class="section-num">2</span> The Theory: Fourier Decomposition</h2>

    <p>
        Jean-Baptiste Fourier proved in 1807 that <strong>any periodic signal can be decomposed
        into a sum of sinusoids</strong>, each with a specific frequency, amplitude, and phase.
        The Fast Fourier Transform (FFT) is the algorithm that does this decomposition efficiently.
    </p>

    <p>Applied to stock prices, the decomposition looks like this:</p>

    <div class="equation">
        Price(t) = Trend(t) + <span style="color: var(--accent2);">A<sub>1</sub>&middot;cos(2&pi;f<sub>1</sub>t + &phi;<sub>1</sub>)</span>
        + <span style="color: var(--purple);">A<sub>2</sub>&middot;cos(2&pi;f<sub>2</sub>t + &phi;<sub>2</sub>)</span>
        + ... + Noise(t)
        <br>
        <span class="comment">Each sinusoid represents a hidden cycle with period T = 1/f</span>
    </div>

    <p>The key parameters for each detected cycle:</p>

    <table class="results-table">
        <thead>
            <tr>
                <th>Parameter</th>
                <th>What It Means</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Period</strong> (T)</td>
                <td>Length of one full oscillation in trading days</td>
                <td class="mono">42 days</td>
            </tr>
            <tr>
                <td><strong>Amplitude</strong> (A)</td>
                <td>Price swing magnitude from trend to peak</td>
                <td class="mono">&#8377;175</td>
            </tr>
            <tr>
                <td><strong>Phase</strong> (&phi;)</td>
                <td>Current position within the cycle (0&ndash;360&deg;)</td>
                <td class="mono">265&deg;</td>
            </tr>
            <tr>
                <td><strong>Power</strong></td>
                <td>How much of total price variation this cycle explains</td>
                <td class="mono">67.7%</td>
            </tr>
        </tbody>
    </table>

    <p>
        <strong>The critical insight is phase.</strong> If you know the dominant cycle has a 42-day
        period and the current phase is 265&deg;, you know the stock is <em>rising from a trough
        toward its next peak</em> — and you can calculate exactly how many days until it gets there.
    </p>

    <!-- ============ SECTION 3: PHASE WHEEL ============ -->
    <h2><span class="section-num">3</span> The Phase Wheel: Where Are We Now?</h2>

    <p>
        The dominant cycle's current phase tells you where price sits relative to its cyclical
        peak and trough. Think of it as a clock — but instead of hours, it tracks the
        cycle's position from 0&deg; to 360&deg;:
    </p>

    <div class="phase-diagram">
        <div class="phase-wheel">
            <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                <!-- Background circle -->
                <circle cx="200" cy="200" r="155" fill="none" stroke="#2d3748" stroke-width="1"/>
                <circle cx="200" cy="200" r="120" fill="none" stroke="rgba(45,55,72,0.4)" stroke-width="1"/>

                <!-- Quadrant fills -->
                <!-- Peak zone: 330-30 (top) -->
                <path d="M200,200 L200,45 A155,155 0 0,1 277,68 Z" fill="rgba(239,68,68,0.08)" stroke="none"/>
                <path d="M200,200 L123,68 A155,155 0 0,1 200,45 Z" fill="rgba(239,68,68,0.08)" stroke="none"/>

                <!-- Falling zone: 30-150 (right) -->
                <path d="M200,200 L277,68 A155,155 0 0,1 335,300 Z" fill="rgba(245,158,11,0.08)" stroke="none"/>

                <!-- Trough zone: 150-210 (bottom) -->
                <path d="M200,200 L335,300 A155,155 0 0,1 65,300 Z" fill="rgba(16,185,129,0.08)" stroke="none"/>

                <!-- Rising zone: 210-330 (left) -->
                <path d="M200,200 L65,300 A155,155 0 0,1 123,68 Z" fill="rgba(99,102,241,0.08)" stroke="none"/>

                <!-- Degree markers -->
                <text x="200" y="36" text-anchor="middle" fill="#9ca3af" font-size="12" font-family="JetBrains Mono">0&deg;</text>
                <text x="364" y="205" text-anchor="start" fill="#9ca3af" font-size="12" font-family="JetBrains Mono">90&deg;</text>
                <text x="200" y="374" text-anchor="middle" fill="#9ca3af" font-size="12" font-family="JetBrains Mono">180&deg;</text>
                <text x="36" y="205" text-anchor="end" fill="#9ca3af" font-size="12" font-family="JetBrains Mono">270&deg;</text>

                <!-- Zone labels -->
                <text x="200" y="90" text-anchor="middle" fill="#f87171" font-size="15" font-weight="700" font-family="Inter">PEAK</text>
                <text x="200" y="108" text-anchor="middle" fill="#f87171" font-size="10" font-family="Inter">cos = +1</text>

                <text x="310" y="200" text-anchor="middle" fill="#f59e0b" font-size="15" font-weight="700" font-family="Inter">FALLING</text>
                <text x="310" y="218" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="Inter">heading down</text>

                <text x="200" y="320" text-anchor="middle" fill="#34d399" font-size="15" font-weight="700" font-family="Inter">TROUGH</text>
                <text x="200" y="338" text-anchor="middle" fill="#34d399" font-size="10" font-family="Inter">cos = -1</text>

                <text x="90" y="200" text-anchor="middle" fill="#818cf8" font-size="15" font-weight="700" font-family="Inter">RISING</text>
                <text x="90" y="218" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="Inter">heading up</text>

                <!-- Center dot -->
                <circle cx="200" cy="200" r="4" fill="#6366f1"/>

                <!-- Cosine wave hint -->
                <text x="200" y="185" text-anchor="middle" fill="#64748b" font-size="11" font-family="JetBrains Mono">Phase</text>
                <text x="200" y="200" text-anchor="middle" fill="#64748b" font-size="11" font-family="JetBrains Mono">Wheel</text>

                <!-- Arrow indicators -->
                <!-- Buy arrow at trough -->
                <text x="200" y="295" text-anchor="middle" fill="#10b981" font-size="18">&#9650;</text>
                <text x="200" y="350" text-anchor="middle" fill="#10b981" font-size="10" font-weight="600" font-family="Inter">BUY ZONE</text>

                <!-- Sell arrow at peak -->
                <text x="200" y="120" text-anchor="middle" fill="#ef4444" font-size="18">&#9660;</text>
                <text x="200" y="68" text-anchor="middle" fill="#ef4444" font-size="10" font-weight="600" font-family="Inter">SELL ZONE</text>

                <!-- Example phase pointer at 265 deg (RISING) -->
                <line x1="200" y1="200" x2="87" y2="214" stroke="#818cf8" stroke-width="3" stroke-linecap="round"/>
                <circle cx="87" cy="214" r="5" fill="#818cf8"/>
                <text x="70" y="248" text-anchor="middle" fill="#818cf8" font-size="11" font-weight="600" font-family="JetBrains Mono">265&deg;</text>
            </svg>
        </div>
    </div>

    <table class="results-table">
        <thead>
            <tr>
                <th>Phase</th>
                <th>Range</th>
                <th>Signal</th>
                <th>Trading Implication</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><span class="badge badge-red">PEAK</span></td>
                <td class="mono">330&deg;&ndash;30&deg;</td>
                <td>At cycle high</td>
                <td>Expect downward reversion. Trim / book partial profits.</td>
            </tr>
            <tr>
                <td><span class="badge badge-amber">FALLING</span></td>
                <td class="mono">30&deg;&ndash;150&deg;</td>
                <td>Descending from peak</td>
                <td>Avoid new entries. Wait for trough confirmation.</td>
            </tr>
            <tr>
                <td><span class="badge badge-green">TROUGH</span></td>
                <td class="mono">150&deg;&ndash;210&deg;</td>
                <td>At cycle low</td>
                <td>Accumulation zone. Historically marks bounce points.</td>
            </tr>
            <tr>
                <td><span class="badge badge-purple">RISING</span></td>
                <td class="mono">210&deg;&ndash;330&deg;</td>
                <td>Ascending from trough</td>
                <td>Hold and trail stop-loss. Momentum building.</td>
            </tr>
        </tbody>
    </table>

    <!-- ============ SECTION 4: PROJECTING DATES ============ -->
    <h2><span class="section-num">4</span> Projecting Next Peak & Trough</h2>

    <p>
        Once you know the current phase and period, projecting the next turning point
        is straightforward trigonometry:
    </p>

    <div class="equation">
        degrees_to_peak = (360&deg; &minus; current_phase) mod 360&deg;<br>
        trading_days = degrees_to_peak &divide; 360&deg; &times; period<br>
        calendar_days = trading_days &times; 7 &divide; 5<br><br>
        <span class="comment">Same logic for trough — target 180&deg; instead of 0&deg;</span>
    </div>

    <p>
        The forward price projection reconstructs the top 3 detected cycles and
        extrapolates them forward, <strong>anchored</strong> to the actual last closing price
        to prevent discontinuity:
    </p>

    <div class="equation">
        projection(t) = trend(t) + &Sigma; A<sub>i</sub>&middot;cos(2&pi;f<sub>i</sub>t + &phi;<sub>i</sub>)<br>
        <span class="comment">Sum of top 3 cycle sinusoids extrapolated forward from the last data point</span>
    </div>

    <!-- ============ SECTION 5: LIVE CHART ============ -->
    <h2><span class="section-num">5</span> Real Output: BSE Ltd Cycle Projection</h2>

    <p>
        Here's an actual output from the system. The chart shows BSE Ltd's price history,
        the extracted trend, the reconstructed cycle fit, and the forward projection
        with projected trough and peak markers:
    </p>

    <!-- Stats Cards -->
    <div class="stats-row">
        <div class="stat-card">
            <div class="stat-value" style="color: var(--green);">65</div>
            <div class="stat-label">Confidence</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: var(--accent2);">126d</div>
            <div class="stat-label">Dominant Period</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: var(--amber);">85%</div>
            <div class="stat-label">Harmonic Strength</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: var(--cyan);">7.6 dB</div>
            <div class="stat-label">Spectral SNR</div>
        </div>
    </div>

    <!-- Live Chart -->
    <div class="chart-section">
        <div class="chart-header">
            <div>
                <div class="chart-title">BSE Ltd &mdash; Fourier Cycle Projection</div>
                <div class="chart-subtitle">Confidence: 65/100 (HIGH) &bull; Phase: CYCLE_FALLING &bull; Dominant: 126-day cycle</div>
            </div>
        </div>
        <div id="bseChart" style="width: 100%; height: 380px;"></div>
        <div class="chart-legend">
            <div class="legend-item">
                <div class="legend-line" style="background: #9ca3af;"></div>
                Actual Price
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: #475569;"></div>
                Trend (Polyfit)
            </div>
            <div class="legend-item">
                <div class="legend-line" style="background: #6366f1;"></div>
                Cycle Fit (Reconstructed)
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: #10b981;"></div>
                Forward Projection
            </div>
        </div>
    </div>

    <!-- Cycles Table -->
    <h3>Detected Dominant Cycles</h3>
    <table class="results-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Period</th>
                <th>Amplitude</th>
                <th>Phase</th>
                <th>Power %</th>
                <th>Welch Confirmed</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="mono">1</td>
                <td class="mono"><strong>126 days</strong></td>
                <td class="mono">&#8377;175.03</td>
                <td class="mono">109&deg;</td>
                <td class="mono">67.7%</td>
                <td>&mdash;</td>
            </tr>
            <tr>
                <td class="mono">2</td>
                <td class="mono">84 days</td>
                <td class="mono">&#8377;80.76</td>
                <td class="mono">304&deg;</td>
                <td class="mono">14.4%</td>
                <td>&mdash;</td>
            </tr>
            <tr>
                <td class="mono">3</td>
                <td class="mono">50 days</td>
                <td class="mono">&#8377;36.52</td>
                <td class="mono">132&deg;</td>
                <td class="mono">2.9%</td>
                <td>&mdash;</td>
            </tr>
            <tr>
                <td class="mono">4</td>
                <td class="mono">17 days</td>
                <td class="mono">&#8377;29.50</td>
                <td class="mono">120&deg;</td>
                <td class="mono">1.9%</td>
                <td><span class="badge badge-green">Confirmed</span></td>
            </tr>
            <tr>
                <td class="mono">5</td>
                <td class="mono">18 days</td>
                <td class="mono">&#8377;27.65</td>
                <td class="mono">272&deg;</td>
                <td class="mono">1.7%</td>
                <td><span class="badge badge-green">Confirmed</span></td>
            </tr>
        </tbody>
    </table>

    <div class="insight-box green">
        <div class="label">Projection Result</div>
        <p>
            BSE's dominant 126-day cycle is in the falling phase at 109&deg; — approaching next trough
            around <strong>March 19, 2026</strong>. Next peak projected around <strong>June 15, 2026</strong>
            at approximately &#8377;3,681 — representing a +21.7% cyclical gain from trough to peak.
            85% of spectral power concentrated in top 3 cycles. Projections rated <strong>HIGH confidence</strong>.
        </p>
    </div>

    <hr class="divider">

    <!-- ============ SECTION 6: TRUST BUT VERIFY ============ -->
    <h2><span class="section-num">6</span> Trust But Verify: The Confidence Score</h2>

    <p>
        Not all stocks are cyclical. A naive FFT will find "cycles" in random noise too.
        The system uses a <strong>multi-layer confidence scoring system</strong> to separate
        real cycles from statistical artifacts:
    </p>

    <div class="confidence-grid">
        <div class="conf-card">
            <div class="weight" style="color: var(--accent2);">30% Weight</div>
            <div class="name">Harmonic Strength</div>
            <div class="desc">What percentage of total spectral power is concentrated in the top 3 cycles? Higher = more cyclical, less noise.</div>
        </div>
        <div class="conf-card">
            <div class="weight" style="color: var(--cyan);">25% Weight</div>
            <div class="name">Spectral SNR</div>
            <div class="desc">Signal-to-noise ratio in decibels. Measures how cleanly the cycles stand out above the noise floor.</div>
        </div>
        <div class="conf-card">
            <div class="weight" style="color: var(--green2);">25% Weight</div>
            <div class="name">Welch Cross-Validation</div>
            <div class="desc">An independent spectral method (Welch PSD) is run separately. Cycles that appear in both methods are statistically robust.</div>
        </div>
        <div class="conf-card">
            <div class="weight" style="color: var(--amber);">20% Weight</div>
            <div class="name">Data Coverage</div>
            <div class="desc">Do we have at least 3 full repetitions of the dominant cycle? A "42-day cycle" detected in only 30 days of data is meaningless.</div>
        </div>
    </div>

    <div class="equation">
        Confidence = (Harmonic &times; 0.30) + (SNR &times; 0.25) + (Welch &times; 0.25) + (Coverage &times; 0.20)<br><br>
        <span class="comment">If zero Welch confirmations: penalty &times; 0.65 &mdash; unvalidated cycles lose 35% confidence</span>
    </div>

    <table class="results-table">
        <thead>
            <tr>
                <th>Score</th>
                <th>Label</th>
                <th>Interpretation</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="mono">&ge; 65</td>
                <td><span class="badge badge-green">HIGH</span></td>
                <td>Projections are actionable. Real cycles detected with statistical validation.</td>
            </tr>
            <tr>
                <td class="mono">45&ndash;64</td>
                <td><span class="badge badge-amber">MODERATE</span></td>
                <td>Treat projections as directional hints, not precise dates.</td>
            </tr>
            <tr>
                <td class="mono">&lt; 45</td>
                <td><span class="badge badge-red">LOW</span></td>
                <td>Stock is not meaningfully cyclical. Ignore cycle-based signals.</td>
            </tr>
        </tbody>
    </table>

    <hr class="divider">

    <!-- ============ SECTION 7: WHY WELCH ============ -->
    <h2><span class="section-num">7</span> Why Welch Cross-Validation Matters</h2>

    <p>
        Standard FFT on a finite window can produce <strong>spectral leakage</strong> — spurious
        peaks that aren't real cycles. It's the single biggest source of false positives
        in spectral analysis of financial data.
    </p>

    <p>
        Welch's method provides an independent check: it splits the data into overlapping
        segments, computes FFT on each, and averages. A cycle that appears in <em>both</em>
        standard FFT and Welch PSD (within 15% period tolerance) is statistically far
        more likely to be a real phenomenon.
    </p>

    <div class="insight-box amber">
        <div class="label">Practical Impact</div>
        <p>
            In backtesting, stocks with &ge;2 Welch-confirmed cycles showed <strong>2.3x better
            directional accuracy</strong> on projected turning points compared to stocks with
            zero confirmations. This single validation step eliminates the majority of
            false signals.
        </p>
    </div>

    <hr class="divider">

    <!-- ============ SECTION 8: WHAT THIS IS AND ISN'T ============ -->
    <h2><span class="section-num">8</span> What This Is &mdash; and What It Isn't</h2>

    <p>
        FFT cycle analysis is <strong>not a directional predictor</strong>. It doesn't tell you
        whether a stock will go up or down in the long run. That's the job of ML ensemble
        models (XGBoost, Prophet, etc.).
    </p>

    <p>It answers a different and equally valuable question:</p>

    <div class="callout">
        <h3>"Given that this stock oscillates, where in the oscillation are we,<br>and when does the next turning point arrive?"</h3>
        <p style="margin-top: 16px;">
            It's a timing tool, not a direction tool. The most powerful setup is when
            cycle analysis agrees with your directional model — a CYCLE_TROUGH phase
            combined with a BUY signal from ML creates a high-conviction entry.
        </p>
    </div>

    <h3>When It Works</h3>
    <table class="results-table">
        <thead>
            <tr>
                <th>Scenario</th>
                <th>Why FFT Helps</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Institutional rotation patterns</td>
                <td>Quarterly rebalancing creates ~63-day cycles detectable by FFT</td>
            </tr>
            <tr>
                <td>Options expiry cycles</td>
                <td>Monthly/weekly expiry imposes periodic volatility patterns</td>
            </tr>
            <tr>
                <td>Mean-reverting sectors</td>
                <td>Stocks that oscillate around fair value are ideal candidates</td>
            </tr>
            <tr>
                <td>Screening for timing</td>
                <td>Scan 1000+ stocks to find those at CYCLE_TROUGH with HIGH confidence</td>
            </tr>
        </tbody>
    </table>

    <h3>When It Breaks Down</h3>
    <table class="results-table">
        <thead>
            <tr>
                <th>Scenario</th>
                <th>Why</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>News-driven moves</td>
                <td>Earnings surprises, policy shocks override cyclical patterns</td>
            </tr>
            <tr>
                <td>Strong trending regimes</td>
                <td>Pure bull/bear runs have no oscillation to detect</td>
            </tr>
            <tr>
                <td>Structural breaks</td>
                <td>Mergers, delistings, sector shifts invalidate historical cycles</td>
            </tr>
            <tr>
                <td>Low harmonic strength</td>
                <td>Stock is simply not cyclical — the confidence score catches this</td>
            </tr>
        </tbody>
    </table>

    <hr class="divider">

    <!-- ============ SECTION 9: THE IMPLEMENTATION STACK ============ -->
    <h2><span class="section-num">9</span> Implementation Stack</h2>

    <table class="results-table">
        <thead>
            <tr>
                <th>Component</th>
                <th>Technology</th>
                <th>Role</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>FFT Engine</td>
                <td class="mono">scipy.fft.rfft</td>
                <td>Core spectral decomposition</td>
            </tr>
            <tr>
                <td>Peak Detection</td>
                <td class="mono">scipy.signal.find_peaks</td>
                <td>Identify dominant frequency peaks in power spectrum</td>
            </tr>
            <tr>
                <td>Cross-Validation</td>
                <td class="mono">scipy.signal.welch</td>
                <td>Independent PSD for cycle confirmation</td>
            </tr>
            <tr>
                <td>Windowing</td>
                <td class="mono">scipy.signal.windows.hann</td>
                <td>Reduce spectral leakage at FFT bin edges</td>
            </tr>
            <tr>
                <td>Detrending</td>
                <td class="mono">numpy.polyfit</td>
                <td>Remove linear trend before FFT</td>
            </tr>
            <tr>
                <td>Visualization</td>
                <td class="mono">Lightweight Charts</td>
                <td>Interactive price + projection charts</td>
            </tr>
            <tr>
                <td>Backend</td>
                <td class="mono">FastAPI + PostgreSQL</td>
                <td>API serving + persistence</td>
            </tr>
            <tr>
                <td>Cache</td>
                <td class="mono">Redis</td>
                <td>1-hour TTL analysis cache</td>
            </tr>
        </tbody>
    </table>

    <hr class="divider">

    <!-- ============ CLOSING ============ -->
    <h2><span class="section-num">10</span> Key Takeaways</h2>

    <div class="insight-box green">
        <div class="label">Takeaway 1</div>
        <p>
            <strong>Stock prices contain hidden rhythmic patterns</strong> created by institutional
            behavior, options cycles, and sector rotation. FFT can extract them mathematically.
        </p>
    </div>

    <div class="insight-box">
        <div class="label">Takeaway 2</div>
        <p>
            <strong>Phase position is the actionable output.</strong> Knowing you're at CYCLE_TROUGH
            with HIGH confidence is more useful for timing than any lagging indicator.
        </p>
    </div>

    <div class="insight-box amber">
        <div class="label">Takeaway 3</div>
        <p>
            <strong>Multi-layer validation is non-negotiable.</strong> Raw FFT produces false positives.
            Welch cross-validation, harmonic strength, and spectral SNR together filter
            signal from noise. Without them, you're curve-fitting randomness.
        </p>
    </div>

    <div class="insight-box green">
        <div class="label">Takeaway 4</div>
        <p>
            <strong>FFT complements, not replaces, ML prediction.</strong> Use ML for direction
            (BUY/SELL), use FFT for timing (when to enter/exit). The combination is more
            powerful than either alone.
        </p>
    </div>

    <div style="text-align: center; margin-top: 64px; padding-top: 32px; border-top: 1px solid var(--border);">
        <p style="color: var(--text3); font-size: 14px;">
            Built as part of a personal trading analytics platform for Indian equity markets.<br>
            The full system runs XGBoost + Prophet + Autoencoder ensemble predictions alongside
            Fourier cycle analysis across 1,200+ stocks daily.
        </p>
    </div>

</article>

<script>
// ============ BSE CHART WITH REAL DATA ============
(function() {
    const container = document.getElementById('bseChart');
    const chart = LightweightCharts.createChart(container, {
        width: container.clientWidth,
        height: 380,
        layout: {
            background: { type: 'solid', color: 'transparent' },
            textColor: '#9ca3af',
            fontSize: 11,
            fontFamily: 'JetBrains Mono, monospace',
        },
        grid: {
            vertLines: { color: 'rgba(45,55,72,0.15)' },
            horzLines: { color: 'rgba(45,55,72,0.15)' },
        },
        crosshair: {
            mode: LightweightCharts.CrosshairMode.Normal,
            vertLine: { color: 'rgba(99,102,241,0.3)', width: 1, style: 2 },
            horzLine: { color: 'rgba(99,102,241,0.3)', width: 1, style: 2 },
        },
        rightPriceScale: {
            borderColor: '#1f2937',
            scaleMargins: { top: 0.08, bottom: 0.08 },
        },
        timeScale: {
            borderColor: '#1f2937',
            timeVisible: false,
        },
    });

    // 1. Actual Price (grey solid)
    const priceSeries = chart.addLineSeries({
        color: '#9ca3af',
        lineWidth: 2,
        lineStyle: 0,
        priceLineVisible: false,
        lastValueVisible: false,
    });
    priceSeries.setData([{"time":"2025-10-08","value":2244},{"time":"2025-10-09","value":2330},{"time":"2025-10-10","value":2385},{"time":"2025-10-13","value":2476},{"time":"2025-10-14","value":2448},{"time":"2025-10-15","value":2456},{"time":"2025-10-16","value":2509},{"time":"2025-10-17","value":2486},{"time":"2025-10-20","value":2494},{"time":"2025-10-21","value":2488},{"time":"2025-10-23","value":2488},{"time":"2025-10-24","value":2475},{"time":"2025-10-27","value":2510},{"time":"2025-10-28","value":2420},{"time":"2025-10-29","value":2447},{"time":"2025-10-30","value":2443},{"time":"2025-10-31","value":2479},{"time":"2025-11-03","value":2548},{"time":"2025-11-04","value":2497},{"time":"2025-11-05","value":2497},{"time":"2025-11-06","value":2456},{"time":"2025-11-07","value":2678},{"time":"2025-11-10","value":2625},{"time":"2025-11-11","value":2644},{"time":"2025-11-12","value":2775},{"time":"2025-11-13","value":2760},{"time":"2025-11-14","value":2828},{"time":"2025-11-17","value":2812},{"time":"2025-11-18","value":2834},{"time":"2025-11-19","value":2898},{"time":"2025-11-20","value":2896},{"time":"2025-11-21","value":2858},{"time":"2025-11-24","value":2802},{"time":"2025-11-25","value":2841},{"time":"2025-11-26","value":2887},{"time":"2025-11-27","value":2929},{"time":"2025-11-28","value":2902},{"time":"2025-12-01","value":2887},{"time":"2025-12-02","value":2843},{"time":"2025-12-03","value":2751},{"time":"2025-12-04","value":2765},{"time":"2025-12-05","value":2816},{"time":"2025-12-08","value":2799},{"time":"2025-12-09","value":2716},{"time":"2025-12-10","value":2582},{"time":"2025-12-11","value":2699},{"time":"2025-12-12","value":2735},{"time":"2025-12-15","value":2649},{"time":"2025-12-16","value":2606},{"time":"2025-12-17","value":2630},{"time":"2025-12-18","value":2683},{"time":"2025-12-19","value":2685},{"time":"2025-12-22","value":2776},{"time":"2025-12-23","value":2738},{"time":"2025-12-24","value":2671},{"time":"2025-12-25","value":2671},{"time":"2025-12-26","value":2649},{"time":"2025-12-29","value":2628},{"time":"2025-12-30","value":2581},{"time":"2025-12-31","value":2632},{"time":"2026-01-01","value":2628},{"time":"2026-01-02","value":2666},{"time":"2026-01-05","value":2674},{"time":"2026-01-06","value":2706},{"time":"2026-01-07","value":2745},{"time":"2026-01-08","value":2694},{"time":"2026-01-09","value":2670},{"time":"2026-01-12","value":2791},{"time":"2026-01-13","value":2832},{"time":"2026-01-14","value":2837},{"time":"2026-01-16","value":2809},{"time":"2026-01-19","value":2727},{"time":"2026-01-20","value":2653},{"time":"2026-01-21","value":2629},{"time":"2026-01-22","value":2709},{"time":"2026-01-23","value":2685},{"time":"2026-01-27","value":2761},{"time":"2026-01-28","value":2822},{"time":"2026-01-29","value":2862},{"time":"2026-01-30","value":2797},{"time":"2026-02-02","value":2702},{"time":"2026-02-03","value":2861},{"time":"2026-02-04","value":2894},{"time":"2026-02-05","value":2890},{"time":"2026-02-06","value":2892},{"time":"2026-02-09","value":2986},{"time":"2026-02-10","value":3174},{"time":"2026-02-11","value":3179},{"time":"2026-02-12","value":3137},{"time":"2026-02-13","value":3025}]);

    // 2. Trend (dark grey dashed)
    const trendSeries = chart.addLineSeries({
        color: '#475569',
        lineWidth: 1,
        lineStyle: 2,
        priceLineVisible: false,
        lastValueVisible: false,
    });
    trendSeries.setData([{"time":"2025-10-08","value":2538.76},{"time":"2025-10-13","value":2551.25},{"time":"2025-10-20","value":2572.06},{"time":"2025-10-27","value":2588.71},{"time":"2025-11-03","value":2609.52},{"time":"2025-11-10","value":2630.34},{"time":"2025-11-17","value":2651.15},{"time":"2025-11-24","value":2671.96},{"time":"2025-12-01","value":2692.78},{"time":"2025-12-08","value":2713.59},{"time":"2025-12-15","value":2734.4},{"time":"2025-12-22","value":2755.22},{"time":"2025-12-29","value":2776.03},{"time":"2026-01-05","value":2796.84},{"time":"2026-01-12","value":2817.66},{"time":"2026-01-19","value":2834.31},{"time":"2026-01-27","value":2855.12},{"time":"2026-02-02","value":2871.77},{"time":"2026-02-09","value":2892.59},{"time":"2026-02-13","value":2909.24},{"time":"2026-02-16","value":2913.4},{"time":"2026-02-23","value":2934.21},{"time":"2026-03-02","value":2955.03},{"time":"2026-03-09","value":2975.84},{"time":"2026-03-16","value":2996.65},{"time":"2026-03-23","value":3017.47},{"time":"2026-03-30","value":3038.28},{"time":"2026-04-06","value":3059.09},{"time":"2026-04-13","value":3079.91},{"time":"2026-04-20","value":3100.72},{"time":"2026-04-27","value":3121.53},{"time":"2026-05-04","value":3142.35},{"time":"2026-05-11","value":3163.16},{"time":"2026-05-18","value":3183.97},{"time":"2026-05-25","value":3204.79},{"time":"2026-06-01","value":3225.6},{"time":"2026-06-08","value":3246.41},{"time":"2026-06-15","value":3267.23},{"time":"2026-06-22","value":3288.04}]);

    // 3. Cycle Fit (indigo solid)
    const cycleFitSeries = chart.addLineSeries({
        color: '#6366f1',
        lineWidth: 2,
        lineStyle: 0,
        priceLineVisible: false,
        lastValueVisible: false,
    });
    cycleFitSeries.setData([{"time":"2025-10-08","value":2383.67},{"time":"2025-10-09","value":2401.75},{"time":"2025-10-10","value":2420.46},{"time":"2025-10-13","value":2439.69},{"time":"2025-10-14","value":2459.34},{"time":"2025-10-15","value":2479.3},{"time":"2025-10-16","value":2499.46},{"time":"2025-10-17","value":2519.72},{"time":"2025-10-20","value":2539.95},{"time":"2025-10-21","value":2560.05},{"time":"2025-10-23","value":2579.9},{"time":"2025-10-24","value":2599.39},{"time":"2025-10-27","value":2618.43},{"time":"2025-10-28","value":2636.92},{"time":"2025-10-29","value":2654.76},{"time":"2025-10-30","value":2671.87},{"time":"2025-10-31","value":2688.17},{"time":"2025-11-03","value":2703.6},{"time":"2025-11-04","value":2718.11},{"time":"2025-11-05","value":2731.65},{"time":"2025-11-06","value":2744.19},{"time":"2025-11-07","value":2755.69},{"time":"2025-11-10","value":2766.16},{"time":"2025-11-11","value":2775.58},{"time":"2025-11-12","value":2783.98},{"time":"2025-11-13","value":2791.37},{"time":"2025-11-14","value":2797.79},{"time":"2025-11-17","value":2803.27},{"time":"2025-11-18","value":2807.87},{"time":"2025-11-19","value":2811.64},{"time":"2025-11-20","value":2814.65},{"time":"2025-11-21","value":2816.98},{"time":"2025-11-24","value":2818.69},{"time":"2025-11-25","value":2819.88},{"time":"2025-11-26","value":2820.62},{"time":"2025-11-27","value":2821.0},{"time":"2025-11-28","value":2821.1},{"time":"2025-12-01","value":2821.01},{"time":"2025-12-02","value":2820.8},{"time":"2025-12-03","value":2820.57},{"time":"2025-12-04","value":2820.37},{"time":"2025-12-05","value":2820.28},{"time":"2025-12-08","value":2820.37},{"time":"2025-12-09","value":2820.68},{"time":"2025-12-10","value":2821.27},{"time":"2025-12-11","value":2822.18},{"time":"2025-12-12","value":2823.42},{"time":"2025-12-15","value":2825.04},{"time":"2025-12-16","value":2827.04},{"time":"2025-12-17","value":2829.42},{"time":"2025-12-18","value":2832.19},{"time":"2025-12-19","value":2835.32},{"time":"2025-12-22","value":2838.8},{"time":"2025-12-23","value":2842.6},{"time":"2025-12-24","value":2846.67},{"time":"2025-12-25","value":2850.99},{"time":"2025-12-26","value":2855.5},{"time":"2025-12-29","value":2860.16},{"time":"2025-12-30","value":2864.9},{"time":"2025-12-31","value":2869.67},{"time":"2026-01-01","value":2874.41},{"time":"2026-01-02","value":2879.06},{"time":"2026-01-05","value":2883.57},{"time":"2026-01-06","value":2887.88},{"time":"2026-01-07","value":2891.93},{"time":"2026-01-08","value":2895.67},{"time":"2026-01-09","value":2899.07},{"time":"2026-01-12","value":2902.07},{"time":"2026-01-13","value":2904.65},{"time":"2026-01-14","value":2906.78},{"time":"2026-01-16","value":2908.43},{"time":"2026-01-19","value":2909.6},{"time":"2026-01-20","value":2910.27},{"time":"2026-01-21","value":2910.46},{"time":"2026-01-22","value":2910.16},{"time":"2026-01-23","value":2909.41},{"time":"2026-01-27","value":2908.21},{"time":"2026-01-28","value":2906.61},{"time":"2026-01-29","value":2904.63},{"time":"2026-01-30","value":2902.33},{"time":"2026-02-02","value":2899.75},{"time":"2026-02-03","value":2896.94},{"time":"2026-02-04","value":2893.95},{"time":"2026-02-05","value":2890.85},{"time":"2026-02-06","value":2887.69},{"time":"2026-02-09","value":2884.53},{"time":"2026-02-10","value":2881.43},{"time":"2026-02-11","value":2878.45},{"time":"2026-02-12","value":2875.64},{"time":"2026-02-13","value":2873.05}]);

    // 4. Forward Projection (green dashed)
    const projSeries = chart.addLineSeries({
        color: '#10b981',
        lineWidth: 2,
        lineStyle: 2,
        priceLineVisible: false,
        lastValueVisible: false,
    });
    projSeries.setData([{"time":"2026-02-13","value":3025},{"time":"2026-02-16","value":3022.68},{"time":"2026-02-17","value":3020.67},{"time":"2026-02-18","value":3019.01},{"time":"2026-02-19","value":3017.73},{"time":"2026-02-20","value":3016.85},{"time":"2026-02-23","value":3016.39},{"time":"2026-02-24","value":3016.36},{"time":"2026-02-25","value":3016.77},{"time":"2026-02-26","value":3017.6},{"time":"2026-02-27","value":3018.86},{"time":"2026-03-02","value":3020.51},{"time":"2026-03-03","value":3022.54},{"time":"2026-03-04","value":3024.91},{"time":"2026-03-05","value":3027.59},{"time":"2026-03-06","value":3030.54},{"time":"2026-03-09","value":3033.72},{"time":"2026-03-10","value":3037.07},{"time":"2026-03-11","value":3040.56},{"time":"2026-03-12","value":3044.12},{"time":"2026-03-13","value":3047.71},{"time":"2026-03-16","value":3051.28},{"time":"2026-03-17","value":3054.79},{"time":"2026-03-18","value":3058.18},{"time":"2026-03-19","value":3061.42},{"time":"2026-03-20","value":3064.48},{"time":"2026-03-23","value":3067.31},{"time":"2026-03-24","value":3069.91},{"time":"2026-03-25","value":3072.24},{"time":"2026-03-26","value":3074.31},{"time":"2026-03-27","value":3076.11},{"time":"2026-03-30","value":3077.64},{"time":"2026-03-31","value":3078.93},{"time":"2026-04-01","value":3079.99},{"time":"2026-04-02","value":3080.85},{"time":"2026-04-03","value":3081.56},{"time":"2026-04-06","value":3082.16},{"time":"2026-04-07","value":3082.7},{"time":"2026-04-08","value":3083.24},{"time":"2026-04-09","value":3083.86},{"time":"2026-04-10","value":3084.61},{"time":"2026-04-13","value":3085.57},{"time":"2026-04-14","value":3086.83},{"time":"2026-04-15","value":3088.45},{"time":"2026-04-16","value":3090.52},{"time":"2026-04-17","value":3093.12},{"time":"2026-04-20","value":3096.31},{"time":"2026-04-21","value":3100.19},{"time":"2026-04-22","value":3104.8},{"time":"2026-04-23","value":3110.23},{"time":"2026-04-24","value":3116.52},{"time":"2026-04-27","value":3123.73},{"time":"2026-04-28","value":3131.89},{"time":"2026-04-29","value":3141.05},{"time":"2026-04-30","value":3151.22},{"time":"2026-05-01","value":3162.42},{"time":"2026-05-04","value":3174.65},{"time":"2026-05-05","value":3187.89},{"time":"2026-05-06","value":3202.14},{"time":"2026-05-07","value":3217.35},{"time":"2026-05-08","value":3233.48},{"time":"2026-05-11","value":3250.49},{"time":"2026-05-12","value":3268.3},{"time":"2026-05-13","value":3286.85},{"time":"2026-05-14","value":3306.05},{"time":"2026-05-15","value":3325.8},{"time":"2026-05-18","value":3346.02},{"time":"2026-05-19","value":3366.59},{"time":"2026-05-20","value":3387.41},{"time":"2026-05-21","value":3408.36},{"time":"2026-05-22","value":3429.32},{"time":"2026-05-25","value":3450.19},{"time":"2026-05-26","value":3470.83},{"time":"2026-05-27","value":3491.14},{"time":"2026-05-28","value":3511},{"time":"2026-05-29","value":3530.3},{"time":"2026-06-01","value":3548.93},{"time":"2026-06-02","value":3566.8},{"time":"2026-06-03","value":3583.82},{"time":"2026-06-04","value":3599.89},{"time":"2026-06-05","value":3614.95},{"time":"2026-06-08","value":3628.93},{"time":"2026-06-09","value":3641.77},{"time":"2026-06-10","value":3653.44},{"time":"2026-06-11","value":3663.89},{"time":"2026-06-12","value":3673.11},{"time":"2026-06-15","value":3681.08},{"time":"2026-06-16","value":3687.8},{"time":"2026-06-17","value":3693.28},{"time":"2026-06-18","value":3697.55},{"time":"2026-06-19","value":3700.63},{"time":"2026-06-22","value":3702.57},{"time":"2026-06-23","value":3703.4}]);

    // Markers on projection series
    projSeries.setMarkers([
        {
            time: '2026-03-19',
            position: 'belowBar',
            color: '#10b981',
            shape: 'arrowUp',
            text: 'Trough ~Mar 19',
        },
        {
            time: '2026-06-15',
            position: 'aboveBar',
            color: '#ef4444',
            shape: 'arrowDown',
            text: 'Peak ~Jun 15',
        },
    ]);

    chart.timeScale().fitContent();

    // Responsive
    const ro = new ResizeObserver(entries => {
        for (const e of entries) {
            chart.applyOptions({ width: e.contentRect.width });
        }
    });
    ro.observe(container);
})();
</script>

</body>
</html>